<?xml version="1.0" encoding="UTF-8"?>



<html xmlns="http://www.w3.org/1999/xhtml"

	xmlns:h="http://java.sun.com/jsf/html"

	xmlns:ui="http://java.sun.com/jsf/facelets"

	xmlns:f="http://java.sun.com/jsf/core"

	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"

	xmlns:of="http://omnifaces.org/functions">

<h:head>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<h:outputStylesheet library="css" name="bootstrap.min.css" />

	<h:outputStylesheet library="css" name="style.css" />

	<title>Gestão de Anúncios</title>







</h:head>

<h:body>

	<div id="menu" class="fixed-top">

		<ui:insert name="menu">

			<ui:include src="menu.xhtml" />

		</ui:insert>

	</div>



	<!--  

	

	

	

	

	*******************************PEDIDOS************************************ 

	

	

	

	

	-->

	<div class="container-fluid">

		<div id="Pedidos">

			<h:form id="super"

				onkeypress="if (event.keyCode == 13){return false;}">





						<h2><b>Gestão de Pedidos </b></h2>
						<p>		Existem <b>#{requerimentoBean.porProcessar.size()}</b> pedidos por processar  </p>
				

				<p:dataTable id="dtreq" var="req"

					value="#{requerimentoBean.porProcessar}" editable="false"

					class="table table-condensed table-hover" rowKey="#{req.id}"

					selection="#{requerimentoBean.selected}" selectionMode="single"

					widgetVar="reqTable"

					emptyMessage="Não foram encontrados resultados com os seguintes criterios"

					filteredValue="#{requerimentoBean.filteredRequerientos}"

					scrollable="true" scrollHeight="250" raggableColumns="false" resizableColumns="false">









					<p:column headerText="Data Envio" sortBy="#{req.data}" styleClass="wrap"

						filterBy="#{req.data}" style="width: 100px;">

						<h:outputText value="#{req.data.toLocalDate()}" escape="false"/>





					</p:column>



					<p:column headerText="requerente" sortBy="#{req.requerente}"

						filterBy="#{req.requerente}"  style="width: 100px;">

						<h:outputText value="#{req.requerente}" escape="false"/>

					</p:column>



					<p:column headerText="Funcao" sortBy="#{req.funcao}"

						filterBy="#{req.funcao}"  style="width: 100px;">

						<h:outputText value="#{req.funcao}" escape="false"/>

					</p:column>





					<p:column headerText="Estado" sortBy="#{req.email}"

						filterBy="#{req.estado}"  style="width: 100px;">

						<h:outputText value="#{req.estado}" escape="false"/>

					</p:column>



				</p:dataTable>



				<p:contextMenu for="dtreq">

					<p:menuitem value="Criar Anuncio" icon="ui-icon-search"

						action="#{requerimentoBean.novoAnuncio()}">

					</p:menuitem>

					<p:menuitem value="Detalhes" icon="ui-icon-search"

						oncomplete="PF('ReqDialog').show()" update=":super:dialog" />

					<p:menuitem value="Delete" update="dtreq" icon="ui-icon-close"

						actionListener="#{requerimentoBean.deleteSelected()}">

						<p:confirm header="Confirmar" message="Tem a certeza?"

							icon="ui-icon-alert" />

					</p:menuitem>

				</p:contextMenu>







				<p:dialog id="dialog" header="Detalhes" widgetVar="ReqDialog"

					modal="true" showEffect="fade" hideEffect="fade" resizable="false"

					dynamic="true">

					<div>



						<div class=" container" id="dreq">

							<div class="col-sm"></div>

							<div class="col-sm container1 ">

								<h:form id="dreqForm">

									<h1 style="text-align: center">Detalhes Pedido

										#{requerimentoBean.selected.id}</h1>





									<h2 style="margin-top: 0">Requerente (Business Manager)</h2>





									<h4>Nome:</h4>

									<h:outputText value="#{requerimentoBean.selected.requerente}" />



									<h3>Email</h3>

									<h:outputText value="#{requerimentoBean.selected.email}" />



									<h2 style="margin-top: 0">Candidato</h2>

									<br />



									<h3>Função</h3>

									<h:outputText value="#{requerimentoBean.selected.funcao}" />



									<h3>Requisitos do Candidato</h3>

									<h:outputText value="#{requerimentoBean.selected.requisitos}" />



									<h3>Observações</h3>

									<h:outputText value="#{requerimentoBean.selected.notas}" />



									<h3>Estado do Requerimento</h3>

									<h:outputText value="#{requerimentoBean.selected.estado}" />



									<h3>Data do Requerimento</h3>

									<h:outputText

										value="#{of:formatDate(DRequemimento.requerimento.data, 'dd.MM.yyyy HH:mm')}" />

								</h:form>





								<h:form>



									<p:button outcome="criarAnuncio?faces-redirect=true"

										value="Criar Novo Anuncio">

										<f:param name="idRequerimento"

											value="#{requerimentoBean.selected.id}"></f:param>

									</p:button>

									<p:button outcome="listaRequerimentos?faces-redirect=true"

										value="Voltar">

									</p:button>



								</h:form>

							</div>

						</div>

					</div>

				</p:dialog>



				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">

					<p:commandButton value="Sim" type="button"

						styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />

					<p:commandButton value="Não" type="button"

						styleClass="ui-confirmdialog-no" icon="ui-icon-close" />

				</p:confirmDialog>





			</h:form>

			<p:commandButton value="Ver todos Pedidos"

				action="listaRequerimentos?faces-redirect=true" style="width:500px" />

		</div>

		<!--  

	

	

	

	

	*******************************ANUNCIOS************************************ 

	

	

	

	

	-->

		<div id="Anuncios">

			<br />

			<h2><b>Gestão de Anuncios</b></h2>
			<p> Existem <b>#{anuncioBean.comTarefa.size()}</b> Anúncios com tarefas por concluir. </p>
			

			<p:dataTable id="dtanuncio" class="table table-condensed table-hover"

				var="anuncio" value="#{anuncioBean.comTarefa}" editable="true"

				rowKey="#{anuncio.id}" selection="#{selected}"

				selectionMode="single" widgetVar="anucioTable"

				emptyMessage="Não foram encontrados resultados com os seguintes criterios"

				filteredValue="#{anuncioBean.filteredAnuncio}" scrollable="true"

				scrollHeight="250" reflow="true" raggableColumns="false" resizableColumns="false">





				<p:ajax event="rowEdit" listener="#{anuncioBean.onRowEdit}" />





				<p:column filterBy="#{anuncio.REF}" headerText="Referência"

					sortBy="#{anuncio.REF}" filterMatchMode="contains" style="width: 100px;" escape="false">

					<p:cellEditor>

						<f:facet name="output">

							<h:outputText value="#{anuncio.REF}" />

						</f:facet>

						<f:facet name="input">

							<p:inputText value="#{anuncio.REF}" label="Referência" />

						</f:facet>

					</p:cellEditor>

				</p:column>





				<p:column filterBy="#{anuncio.funcao}" headerText="Função"

					sortBy="#{anuncio.funcao}" filterMatchMode="contains" style="width: 100px;" escape="false">

					<p:cellEditor>

						<f:facet name="output">

							<h:outputText value="#{anuncio.funcao}" />

						</f:facet>

						<f:facet name="input">

							<p:inputText value="#{anuncio.funcao}" label="Função" />

						</f:facet>

					</p:cellEditor>

				</p:column>



				<p:column filterBy="#{anuncio.manager}" headerText="Manager"

					sortBy="#{anuncio.manager}" filterMatchMode="contains" style="width: 100px;" escape="false">

					<p:cellEditor>

						<f:facet name="output">

							<h:outputText value="#{anuncio.manager}" />

						</f:facet>

						<f:facet name="input">

							<p:inputText value="#{anuncio.manager}" label="Manager" />

						</f:facet>

					</p:cellEditor>

				</p:column>





				<p:column headerText="Estado" sortBy="#{anuncio.estado}"

					filterBy="#{anuncio.estado}" filterMatchMode="contains" style="width: 100px;" escape="false">



					<p:cellEditor>

						<f:facet name="output">

							<h:outputText value="#{anuncio.estado}" />

						</f:facet>

						<f:facet name="input">

							<h:selectOneMenu value="#{anuncio.estado}">

								<f:selectItem itemLabel="Selecione um"

									itemValue="#{anuncio.estado}" />

								<f:selectItem itemLabel="Aplicar" itemValue="Aplicar" />

								<f:selectItem itemLabel="Manter" itemValue="Manter" />

								<f:selectItem itemLabel="Retirar" itemValue="Retirar" />



							</h:selectOneMenu>

						</f:facet>

					</p:cellEditor>

				</p:column>





							<p:column headerText="Plataformas" sortBy="#{anuncioBean.numberOnlinePlats(anuncio)} Plataformas (Online/Total)" style="width:30px;"
							filterBy="#{anuncioBean.numberOnlinePlats(anuncio)}" filterMatchMode="contains">
							<p:button outcome="listarAnunPlat?faces-redirect=true"
								value="#{anuncioBean.numberOnlinePlats(anuncio)} / #{anuncioBean.numberAnunPlats(anuncio)}" >
								<f:param name="idAnuncio" value="#{anuncio.id}"></f:param>
							</p:button>
						</p:column>


						<p:column headerText="Tarefas" sortBy="#{anuncio.tarefas}" style="width:30px;"
							filterBy="#{anuncio.tarefas}" filterMatchMode="contains">
							<h:outputText value="#{anuncio.tarefas}" />
						</p:column>



			


				

					<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">

						<p:commandButton value="Sim" type="button"

							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />

						<p:commandButton value="Não" type="button"

							styleClass="ui-confirmdialog-no" icon="ui-icon-close" />

					</p:confirmDialog>
			
	



			</p:dataTable>

			

			<h:form>

				<p:contextMenu for="dtanuncio">

					<p:menuitem value="Criar Anuncio" icon="ui-icon-search"

						action = "criarAnuncio?faces-redirect=true">

					</p:menuitem>

					<p:menuitem value="Detalhes e Plataformas" icon="ui-icon-search"

						action="#{anuncioBean.listAnunPlat(selected)}" />
	

					<p:menuitem value="Delete" update="dtanuncio" icon="ui-icon-close"

						actionListener="#{anuncioBean.removeAnuncio(selected)}">

						<p:confirm header="Confirmar" message="Tem a certeza?"

							icon="ui-icon-alert" />

					</p:menuitem>

				</p:contextMenu>

			</h:form>

			





			<p:commandButton value="Ver Todos Anúncios"

				action="listaAnuncios?faces-redirect=true" style="width:500px" />

			<br /> <br />

		</div>


	


		

		

	</div>

</h:body>

</html>